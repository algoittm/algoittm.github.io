<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>학교 인라인 어셈블리 과제 | ALGOITTM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="또다시 돌아온 과제 다시 과제가 나왔습니다. 이번엔 C언어를 바탕으로 중간중간 어셈블리어를 혼용하여  코드를 작성하는 것입니다. (NASM이아닌 ATT문법)  내용은 똑같습니다. A-Z 출력하기, 한 자리수를 입력받아 그 수만큼 줄바꿈(\n)을 하고 A출력하기  그리고 n1,n2를 입력받아 n1~n2까지의 합을 구하기 입니다.  처음엔 오히려 C언어를 사용">
<meta name="keywords" content="Assembly,Linux,C">
<meta property="og:type" content="article">
<meta property="og:title" content="학교 인라인 어셈블리 과제">
<meta property="og:url" content="http://algoittm.github.io/2019/06/02/2019-06-02-Inline_Assembly/index.html">
<meta property="og:site_name" content="ALGOITTM">
<meta property="og:description" content="또다시 돌아온 과제 다시 과제가 나왔습니다. 이번엔 C언어를 바탕으로 중간중간 어셈블리어를 혼용하여  코드를 작성하는 것입니다. (NASM이아닌 ATT문법)  내용은 똑같습니다. A-Z 출력하기, 한 자리수를 입력받아 그 수만큼 줄바꿈(\n)을 하고 A출력하기  그리고 n1,n2를 입력받아 n1~n2까지의 합을 구하기 입니다.  처음엔 오히려 C언어를 사용">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://user-images.githubusercontent.com/32864449/58761722-53390800-8582-11e9-8b56-492b69fc255c.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/32864449/58761728-5df39d00-8582-11e9-8027-136c7f80f3f9.jpg">
<meta property="og:image" content="https://user-images.githubusercontent.com/32864449/58761734-677d0500-8582-11e9-96dc-922a9e99968f.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/32864449/58761740-7794e480-8582-11e9-8030-1f9570e1382a.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/32864449/58761744-81b6e300-8582-11e9-9756-16814e94d843.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/32864449/58761753-8bd8e180-8582-11e9-9dfe-b15d11392a1e.png">
<meta property="og:updated_time" content="2019-11-15T08:52:08.087Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="학교 인라인 어셈블리 과제">
<meta name="twitter:description" content="또다시 돌아온 과제 다시 과제가 나왔습니다. 이번엔 C언어를 바탕으로 중간중간 어셈블리어를 혼용하여  코드를 작성하는 것입니다. (NASM이아닌 ATT문법)  내용은 똑같습니다. A-Z 출력하기, 한 자리수를 입력받아 그 수만큼 줄바꿈(\n)을 하고 A출력하기  그리고 n1,n2를 입력받아 n1~n2까지의 합을 구하기 입니다.  처음엔 오히려 C언어를 사용">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/32864449/58761722-53390800-8582-11e9-8b56-492b69fc255c.png">
  
    <link rel="alternate" href="/atom.xml" title="ALGOITTM" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script type="text/javascript" src="/scripts/bigfoot.js"></script>
    <div id="banner"></div>
    <div id="header-outer" class="outer">
        <div id="header-title" class="inner">
            <h1 id="logo-wrap">
                <a href="/" id="logo">
                    ALGOITTM
                </a>
            </h1>
            
                <h2 id="subtitle-wrap">
                    <a href="/" id="subtitle">
                        THINK, WRITE, BUILD
                    </a>
                </h2>
                
        </div>
        <div id="header-inner" class="inner">
            <nav id="main-nav">
                <a id="main-nav-toggle" class="nav-icon"></a>
                
                    <a class="main-nav-link" href="/">
                        Home
                    </a>
                    
                    <a class="main-nav-link" href="/archives">
                        Archives
                    </a>
                    
            </nav>
            <nav id="sub-nav">
                
                    <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
                    
                        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
            </nav>
            <div id="search-form-wrap">
                <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://algoittm.github.io"></form>
            </div>
        </div>
    </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2019-06-02-Inline_Assembly" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/02/2019-06-02-Inline_Assembly/" class="article-date">
  <time datetime="2019-06-02T12:20:00.000Z" itemprop="datePublished">2019-06-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      학교 인라인 어셈블리 과제
    </h1>
  

        <h4> Posted by <a href="https://github.com/Ho95"> ho95 </a></h4>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="또다시-돌아온-과제"><a href="#또다시-돌아온-과제" class="headerlink" title="또다시 돌아온 과제"></a>또다시 돌아온 과제</h2><p>다시 과제가 나왔습니다. 이번엔 C언어를 바탕으로 중간중간 어셈블리어를 혼용하여</p>
<p>코드를 작성하는 것입니다. (NASM이아닌 ATT문법)</p>
<p>내용은 똑같습니다. A-Z 출력하기, 한 자리수를 입력받아 그 수만큼 줄바꿈(\n)을 하고 A출력하기</p>
<p>그리고 n1,n2를 입력받아  n1~n2까지의 합을 구하기 입니다.</p>
<p>처음엔 오히려 C언어를 사용할 수 있으니까 좀더 빨리 끝낼 수 있을 줄 알았는데, 해맸습니다 ㅎㅎ..</p>
<p>항상 기초적인 것을 내주시지만 기초가 없어서 어렵습니다.</p>
<h2 id="ASM-함수"><a href="#ASM-함수" class="headerlink" title="ASM() 함수"></a>ASM() 함수</h2><p>C언어에서 어셈블리어를 혼용해 사용하기 위해서는 asm()함수를 사용합니다.</p>
<p>형식은 asm(“어셈블 명령어”:출력변수:입력변수)입니다.</p>
<p>여기서 입출력 변수란, C언어에서 선언한 변수들을 뜻합니다.</p>
<p>어셈블 명령어는 한개, 또는 복수개가 올 수있습니다.(복수개 사용시 ;을 붙혀 주어야 합니다.)</p>
<p>출력변수 부분은 레지스터에서 C언어 변수로 내보내면  “=r”(변수명)을 해줍니다. (대부분..=r)</p>
<p>입력변수 부분은 C언어 변수에서 레지스터로 값을 불러올시 “r”을, 메모리에서 불러올시 “m”을 사용</p>
<p>하지만 메모리에서 불러오게 되면 속도의 차이가 좀 있습니다.</p>
<p>그리고 불러온 입출력 변수를 어셈블 명령어에서는 “%번호”로 구분합니다.</p>
<p>예를 들어 asm(movb %0, %%bl”::”r”(a))의 경우, 출력 변수 옵션은 없고, 입력 변수에 “r”(a)라고</p>
<p>있습니다. 이 뜻은 호스트 언어의 a변수를 bl이라는 레지스터에 넣는다는 뜻인데, 입력 변수가</p>
<p>하나뿐이라 %0를 써주었습니다. 여러개 있다면 %0부터 시작해서 +1씩 하면 됩니다.</p>
<p>참 호스트 언어의 변수를 레지스터로 불러오거나 그 반대의 경우에 %를 한번더 써주어야합니다.</p>
<p>ATT문법에서 레지스터 앞에 %를 붙힙니다만, 작성되는 코드는 C언어이기 때문에 %를 한번 더 </p>
<p>붙혀서 “%레지스터명”로 확실하게 인식 시켜주게 합니다. 그리고, 입력 변수가 1개 이상일시</p>
<p>eax(ah,al)은 사용하지 않는게 좋습니다. 변수에서 레지스터로 값을 불러올시 eax의 값을</p>
<p>보장할 수없습니다.</p>
<p>밑의 실제 코드를 보시면 조금 이해하는데, 도움이 되지 않을까 합니다.</p>
<h3 id="과제1-A-Z까지-출력하기"><a href="#과제1-A-Z까지-출력하기" class="headerlink" title="과제1: A~Z까지 출력하기"></a>과제1: A~Z까지 출력하기</h3><hr>
<p><img src="https://user-images.githubusercontent.com/32864449/58761722-53390800-8582-11e9-8b56-492b69fc255c.png" alt="hw4_1 01"></p>
<p>일단 실행 결과입니다. 햇갈렸지만 출력하는 코드가 printf하나만 써주면 되어서 코드 길이는</p>
<p>순수 어셈블리어로 작성 했을 때 보단 많이 짧아졌습니다. 코드는 사진과 같습니다.  </p>
<p>코드를 보면 변수의 값을 가져올때 %가 한번더 붙은게 보이시나요?</p>
<p><img src="https://user-images.githubusercontent.com/32864449/58761728-5df39d00-8582-11e9-8027-136c7f80f3f9.jpg" alt="hw4_1"></p>
<p>문자 ‘A’가 저장된 char형 변수 a(1바이트), asm(loop:)로 점프할 위치 만들기</p>
<p>a가 1바이트 char형이기 때문에 어셈블 명령어는 b를 붙혀주어여하고 레지스터는 xH(xL)을 사용.</p>
<p>일단 bl에 ‘A’를 넣어놓고, printf로 a에 있는 ‘A’를 출력 해줍니다.</p>
<p>incb를 통해 bl에 있는 ‘A’=0x65를 1증가시켜 ‘B’=0x66이 되게 합니다.</p>
<p>그리고 movb를 이용하여 a에 1증가된 bl(‘B’)를 새로 넣어줍니다.</p>
<p>그 후, 알파벳이 총 26자이고, A가 65부터 시작하므로 91까지 cmp로 비교를 합니다.</p>
<p>bl이 증가는 하겠지만 그전 까지는 같지 않으므로(cmp가 음수이므로) jne 또는 jl을 사용하여</p>
<p>loop로 점프 후 다시 반복 하는 코드입니다.</p>
<h3 id="과제2-한자리-수를-입력받아-줄바꿈후-A출력하기"><a href="#과제2-한자리-수를-입력받아-줄바꿈후-A출력하기" class="headerlink" title="과제2: 한자리 수를 입력받아 줄바꿈후 A출력하기"></a>과제2: 한자리 수를 입력받아 줄바꿈후 A출력하기</h3><hr>
<p><img src="https://user-images.githubusercontent.com/32864449/58761734-677d0500-8582-11e9-96dc-922a9e99968f.png" alt="hw4_2 01"></p>
<p>실행결과입니다. 제대로 작동하네요. 코드는 아래와 같습니다.</p>
<p><img src="https://user-images.githubusercontent.com/32864449/58761740-7794e480-8582-11e9-8030-1f9570e1382a.png" alt="hw4_2"></p>
<p>char형 변수 a에 ‘A’를 넣어줍니다. 그리고 한자리 수의 숫자가 들어오기 때문에 char형 변수 b를 선언</p>
<p>scanf로 b에 한자리 수를 받아줍니다.(1바이트이기 때문에 hhd, 아마.. halfhalfdec가 아닐지)</p>
<p>점프를 위한 L1:을 선언 해주고, 입력받은 b의 값을 bl로 옮겨줍니다.</p>
<p>줄바꿈 한번 해주고, bl을 1감소 후, b에 넣어줍니다.(출력이기 때문에 “=r”사용/입력시 “r”)</p>
<p>그 후, 0과 bl의 값을 비교해서 cmp 결과가 양수일시 L1으로 다시 점프하게 됩니다.</p>
<p>그리고 마지막으로 a를 출력후 종료하게 됩니다.</p>
<h3 id="과제3-n1-n2를-입력받아-n1-n2의-합-구하기"><a href="#과제3-n1-n2를-입력받아-n1-n2의-합-구하기" class="headerlink" title="과제3: n1,n2를 입력받아 n1~n2의 합 구하기"></a>과제3: n1,n2를 입력받아 n1~n2의 합 구하기</h3><hr>
<p><img src="https://user-images.githubusercontent.com/32864449/58761744-81b6e300-8582-11e9-9756-16814e94d843.png" alt="hw4_3 01"></p>
<p>실행 결과입니다. 잘 나오는군요.    아래는 코드입니다.</p>
<p><img src="https://user-images.githubusercontent.com/32864449/58761753-8bd8e180-8582-11e9-9dfe-b15d11392a1e.png" alt="hw4_3"></p>
<p>n1,n2를 입력받기 위한 int형 변수 a,b이며, c는 n1~n2까지의 합을 저장하기 위한 변수입니다.</p>
<p>scanf로 a,b에 n1,n2를 입력받습니다.</p>
<p>a,b에 입력 받은 값을 각 ecx,edx로 옮깁니다. (int형이기 때문에 movl과 32bit인 ecx사용) ,로 변수2개</p>
<p>점프를 위한 L1:을 지정합니다.</p>
<p>addl을 이용하여 edx(c)에 ecx(a,n1)을 더한 후, ecx(a,n1)을 1증가시킵니다.</p>
<p>cmpl을 사용하여 1증가된 n1과 덧샘의 한계 값인 b(n2)와 비교를 합니다.(입력변수 1개이므로 %0)</p>
<p>n2보다 같거나 작을시(cmp값 음수) L1으로 다시 점프하여 반복 후 movl을 이용하여 edx(c)를 </p>
<p>최종적으로 넣어줍니다. printf로 c를 출력하면 끝!</p>
<h3 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h3><hr>
<p>매번 글을 적지만, 정리해서 깔끔하게 적는게 제일 어려운 것 같습니다.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://algoittm.github.io/2019/06/02/2019-06-02-Inline_Assembly/" data-id="ck2zwm9er000zciotcvellxxd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Assembly/">Assembly</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/07/17/2019-07-18-very_small_basic_for_machine_learning/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          딥러닝을 위한 정말정말 기초 지식1
        
      </div>
    </a>
  
  
    <a href="/2019/05/16/2019-05-17-GAS(GNU Assembler)/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">학교 GAS 과제</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Alexa/">Alexa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Amazon/">Amazon</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assembly/">Assembly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Device-Driver/">Device_Driver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS/">OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/">OpenCV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/">Vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cuda/">cuda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/guide/">guide</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kernel/">kernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lifestyle/">lifestyle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/">macOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/machinelearning/">machinelearning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raspberryPi/">raspberryPi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/study/">study</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unicode/">unicode</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Alexa/" style="font-size: 10px;">Alexa</a> <a href="/tags/Algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/tags/Amazon/" style="font-size: 10px;">Amazon</a> <a href="/tags/Assembly/" style="font-size: 20px;">Assembly</a> <a href="/tags/C/" style="font-size: 15px;">C</a> <a href="/tags/Device-Driver/" style="font-size: 15px;">Device_Driver</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/OS/" style="font-size: 10px;">OS</a> <a href="/tags/OpenCV/" style="font-size: 10px;">OpenCV</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/cuda/" style="font-size: 10px;">cuda</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/guide/" style="font-size: 10px;">guide</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/kernel/" style="font-size: 10px;">kernel</a> <a href="/tags/lifestyle/" style="font-size: 10px;">lifestyle</a> <a href="/tags/macOS/" style="font-size: 10px;">macOS</a> <a href="/tags/machinelearning/" style="font-size: 10px;">machinelearning</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/raspberryPi/" style="font-size: 10px;">raspberryPi</a> <a href="/tags/study/" style="font-size: 15px;">study</a> <a href="/tags/unicode/" style="font-size: 10px;">unicode</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/10/13/2019-10-13-Alexa_skill/">Alexa Custom skill 참고</a>
          </li>
        
          <li>
            <a href="/2019/07/17/2019-07-18-very_small_basic_for_machine_learning/">딥러닝을 위한 정말정말 기초 지식1</a>
          </li>
        
          <li>
            <a href="/2019/06/02/2019-06-02-Inline_Assembly/">학교 인라인 어셈블리 과제</a>
          </li>
        
          <li>
            <a href="/2019/05/16/2019-05-17-GAS(GNU Assembler)/">학교 GAS 과제</a>
          </li>
        
          <li>
            <a href="/2019/05/10/2019-05-10-NASM(Netwide Assembly)/">학교 NASM 과제</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 algoittm<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>