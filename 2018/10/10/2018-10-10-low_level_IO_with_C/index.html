<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Low level I/O with C | ALGOITTM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="저수준의 파일 입출력 with C 리눅스는 모든 것을 File로 관리 하는데, 장치들도 File로 관리합니다. 그리고 리눅스는 대부분 C로   구성되어 있습니다. 이번학기 Device Driver(이하 DD) 수업을 들으면서 C로 짜여진 소스를 보게 되는데,   이때 저수준의 파일 입출력 함수가 쓰이고, 주로 Block DD가 아닌 Character DD의">
<meta name="keywords" content="C,Device_Driver">
<meta property="og:type" content="article">
<meta property="og:title" content="Low level I&#x2F;O with C">
<meta property="og:url" content="http://algoittm.github.io/2018/10/10/2018-10-10-low_level_IO_with_C/index.html">
<meta property="og:site_name" content="ALGOITTM">
<meta property="og:description" content="저수준의 파일 입출력 with C 리눅스는 모든 것을 File로 관리 하는데, 장치들도 File로 관리합니다. 그리고 리눅스는 대부분 C로   구성되어 있습니다. 이번학기 Device Driver(이하 DD) 수업을 들으면서 C로 짜여진 소스를 보게 되는데,   이때 저수준의 파일 입출력 함수가 쓰이고, 주로 Block DD가 아닌 Character DD의">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://github.com/Ho95/algoittm.github.io/blob/source/source/images/2018-10-10-low_level_IO_with_C/FILE_1.JPG?raw=true">
<meta property="og:updated_time" content="2019-11-15T08:52:08.087Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Low level I&#x2F;O with C">
<meta name="twitter:description" content="저수준의 파일 입출력 with C 리눅스는 모든 것을 File로 관리 하는데, 장치들도 File로 관리합니다. 그리고 리눅스는 대부분 C로   구성되어 있습니다. 이번학기 Device Driver(이하 DD) 수업을 들으면서 C로 짜여진 소스를 보게 되는데,   이때 저수준의 파일 입출력 함수가 쓰이고, 주로 Block DD가 아닌 Character DD의">
<meta name="twitter:image" content="https://github.com/Ho95/algoittm.github.io/blob/source/source/images/2018-10-10-low_level_IO_with_C/FILE_1.JPG?raw=true">
  
    <link rel="alternate" href="/atom.xml" title="ALGOITTM" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script type="text/javascript" src="/scripts/bigfoot.js"></script>
    <div id="banner"></div>
    <div id="header-outer" class="outer">
        <div id="header-title" class="inner">
            <h1 id="logo-wrap">
                <a href="/" id="logo">
                    ALGOITTM
                </a>
            </h1>
            
                <h2 id="subtitle-wrap">
                    <a href="/" id="subtitle">
                        THINK, WRITE, BUILD
                    </a>
                </h2>
                
        </div>
        <div id="header-inner" class="inner">
            <nav id="main-nav">
                <a id="main-nav-toggle" class="nav-icon"></a>
                
                    <a class="main-nav-link" href="/">
                        Home
                    </a>
                    
                    <a class="main-nav-link" href="/archives">
                        Archives
                    </a>
                    
            </nav>
            <nav id="sub-nav">
                
                    <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
                    
                        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
            </nav>
            <div id="search-form-wrap">
                <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://algoittm.github.io"></form>
            </div>
        </div>
    </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2018-10-10-low_level_IO_with_C" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/10/2018-10-10-low_level_IO_with_C/" class="article-date">
  <time datetime="2018-10-10T13:50:00.000Z" itemprop="datePublished">2018-10-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Low level I/O with C
    </h1>
  

        <h4> Posted by <a href="https://github.com/Ho95"> Ho95 </a></h4>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="저수준의-파일-입출력-with-C"><a href="#저수준의-파일-입출력-with-C" class="headerlink" title="저수준의 파일 입출력 with C"></a>저수준의 파일 입출력 with C</h1><p>리눅스는 모든 것을 File로 관리 하는데, 장치들도 File로 관리합니다.  그리고 리눅스는 대부분 C로 </p>
<p>구성되어 있습니다. 이번학기 Device Driver(이하 DD) 수업을 들으면서 C로 짜여진 소스를 보게 되는데, </p>
<p>이때 저수준의 파일 입출력 함수가 쓰이고, 주로 Block DD가 아닌 Character DD의 소스를 봅니다.</p>
<p>이 글에는 문자 DD에 쓰이는 C언어의 저수준 파일 입출력 함수들을 정리 해보고자 합니다.</p>
<h2 id="C언어의-파일-입출력의-종류"><a href="#C언어의-파일-입출력의-종류" class="headerlink" title="C언어의 파일 입출력의 종류"></a>C언어의 파일 입출력의 종류</h2><p>C의 파일 입출력은 2가지 종류가 있습니다.</p>
<p>고수준과 저수준 2가지입니다. 차이점은 얼마나 더 사람에 가까운가 입니다.</p>
<p><img src="https://github.com/Ho95/algoittm.github.io/blob/source/source/images/2018-10-10-low_level_IO_with_C/FILE_1.JPG?raw=true" alt="FILE_1"></p>
<p>​                                        출처: <a href="http://www.soen.kr" target="_blank" rel="noopener">www.soen.kr</a></p>
<p>위의 표가 수준 차이에 따른 차이점들입니다. 그리고 중간에 버퍼가 있냐 없냐 입니다.</p>
<p>DD에서는 저수준 입출력만 사용 한다고 하였는데, 그 이유는 중간 버퍼의 버퍼링으로 인해 </p>
<p>지연이 있을 수 있기 때문입니다. 바로 바로 처리가 되야 문제가 안 생기겠죠?..</p>
<h2 id="저수준-파일-입출력-함수의-종류"><a href="#저수준-파일-입출력-함수의-종류" class="headerlink" title="저수준 파일 입출력 함수의 종류"></a>저수준 파일 입출력 함수의 종류</h2><p><strong>open(“파일명”,옵션, 파일권한)</strong></p>
<p>:열고자 하는 파일과 모드를 지정하고 fd(file descriptor) 값을 얻어옵니다. 성공시 0이아닌 값 return</p>
<p> 옵션은 O_CREAT: 파일이 없으면 생성 / O_WRONLY: 쓰기전용 / O_RDONLY: 읽기 전용 / O_RDWR: RW 전용</p>
<p> O_APPEND: 파일 끝 부분에 추가 / O_TRUNC: 기존 파일 존재 시, 내용 모두 삭제 입니다.  | 로 여러개 옵션 지정O</p>
<p>파일 권한 같은 경우는 리눅스에서 쓰이는 RWX 권한을 의미합니다.</p>
<p><strong>close(fd)</strong></p>
<p>:오픈한 파일을 그만 사용하고 싶을 때 사용합니다. fd반납.</p>
<p><strong>read(fd,buf,sizeof(buf))</strong></p>
<p>:fd에 해당 하는 파일로 가서 buf 사이즈 만큼 읽어 buf에 저장합니다. </p>
<p><strong>write(fd,buf,sizeof(buf))</strong></p>
<p>:buf에서 buf 사이즈 만큼 읽어 fd에 해당하는 파일에 저장합니다.</p>
<p><strong>lseek(fd, 기준 위치에서 변위, 기준위치 설정)</strong></p>
<p>:fd에 해당 되는 파일 속에서 원하는 위치로 이동하고 싶을때 사용합니다.  (SQL에서의 커서 개념정도..?)</p>
<p> 예를 들어 lseek( fd, 0x378, SEEK_SET ); 이렇게 한 줄의 코드가 있다면,</p>
<p> fd에 해당하는 파일에서 SEEK_SET인해 일단 파일의 맨 시작 위치(주소)로 갑니다. 거기서 0x378(HEX)만큼</p>
<p> 더 가는 것 입니다. 이제 그 주소에 있는 값에 대하여 read,write등을 할 수 있게 됩니다.</p>
<p> SEEK_SET: 파일의 처음 주소 위치 SEEK_CUR: 현재 위치 SEEK_END: 파일의 맨 끝 위치.</p>
<p> 변위를 적을때 -를 적으면 기준위치보다 앞으로 +면 뒤로 이동합니다.</p>
<p><strong>ioctl(fd,command, arg)</strong></p>
<p>: 기존의 read()/write()로 처리 하지 못하는 경우, ioctl을 fd, command와 arg를 인자로 호출하면</p>
<p> 커널에 적재되 있는 DD모듈속 command에 해당하는 처리루틴을 실행후 값을 arg로 받거나 전달 할수 있습니다.</p>
<p> DD 포팅시 ioctl부분의 command 처리 부분을 다 구현 해주어야함.</p>
<p><strong>fsync()</strong></p>
<p>: Device 내부에 buf가 있을 경우 buf 내용을 강제로 내보냅니다. (잘 안쓰인다고 하네요.)</p>
<h2 id="마치며"><a href="#마치며" class="headerlink" title="마치며"></a>마치며</h2><p>DD에서 쓰이는 C언어의 저수준 입출력을 짧게나마 찾아서 정리 해보았습니다.</p>
<p>DD를 구현(포팅) 할려면 lseek()를 정말 능숙하게 다뤄야 할 것 같습니다.</p>
<p>비트 단위로 연산되기 때문에 주소 지정이 정말 중요합니다.</p>
<p>학교 강의에서도 아직 초반이기 때문에 많이는 모르지만 배울수록 매력을 느끼는 분야인 것 같습니다.</p>
<p>끝!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://algoittm.github.io/2018/10/10/2018-10-10-low_level_IO_with_C/" data-id="ck2zwm9ed000lciotnk4epsor" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Device-Driver/">Device_Driver</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/10/15/2018-10-15-how_to_use_dd_in_user_app/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          How to use Device Driver in user app
        
      </div>
    </a>
  
  
    <a href="/2018/09/30/2018-09-30-kernel_guide/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">커널에서 무엇을 배우나요?~</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Alexa/">Alexa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Amazon/">Amazon</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assembly/">Assembly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Device-Driver/">Device_Driver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS/">OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/">OpenCV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/">Vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cuda/">cuda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/guide/">guide</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kernel/">kernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lifestyle/">lifestyle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/">macOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/machinelearning/">machinelearning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raspberryPi/">raspberryPi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/study/">study</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unicode/">unicode</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Alexa/" style="font-size: 10px;">Alexa</a> <a href="/tags/Algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/tags/Amazon/" style="font-size: 10px;">Amazon</a> <a href="/tags/Assembly/" style="font-size: 20px;">Assembly</a> <a href="/tags/C/" style="font-size: 15px;">C</a> <a href="/tags/Device-Driver/" style="font-size: 15px;">Device_Driver</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/OS/" style="font-size: 10px;">OS</a> <a href="/tags/OpenCV/" style="font-size: 10px;">OpenCV</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/cuda/" style="font-size: 10px;">cuda</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/guide/" style="font-size: 10px;">guide</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/kernel/" style="font-size: 10px;">kernel</a> <a href="/tags/lifestyle/" style="font-size: 10px;">lifestyle</a> <a href="/tags/macOS/" style="font-size: 10px;">macOS</a> <a href="/tags/machinelearning/" style="font-size: 10px;">machinelearning</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/raspberryPi/" style="font-size: 10px;">raspberryPi</a> <a href="/tags/study/" style="font-size: 15px;">study</a> <a href="/tags/unicode/" style="font-size: 10px;">unicode</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/10/13/2019-10-13-Alexa_skill/">Alexa Custom skill 참고</a>
          </li>
        
          <li>
            <a href="/2019/07/17/2019-07-18-very_small_basic_for_machine_learning/">딥러닝을 위한 정말정말 기초 지식1</a>
          </li>
        
          <li>
            <a href="/2019/06/02/2019-06-02-Inline_Assembly/">학교 인라인 어셈블리 과제</a>
          </li>
        
          <li>
            <a href="/2019/05/16/2019-05-17-GAS(GNU Assembler)/">학교 GAS 과제</a>
          </li>
        
          <li>
            <a href="/2019/05/10/2019-05-10-NASM(Netwide Assembly)/">학교 NASM 과제</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 algoittm<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>